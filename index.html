<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script type="text/javascript" src="./models/note-model.js"></script>
    <script type="text/javascript" src="./models/note-list-model.js"></script>
    <script type="text/javascript" src="./models/note-list-view.js"></script>
    <script type="text/javascript" src="./models/single-note-view.js"></script>
    <script type="text/javascript" src="./spec/assert.js"></script>
    <script type="text/javascript" src="./spec/testFeedback.js"></script>
    <script type="text/javascript" src="./spec/note-model-tests.js"></script>
    <script type="text/javascript" src="./spec/note-list-tests.js"></script>
    <script type="text/javascript" src="./spec/note-list-view-tests.js"></script>
    <script type="text/javascript" src="./spec/single-note-view-tests.js"></script>
    <title>Note</title>
  </head>
  <body>

    <div id="app">
    </div>

    <script type="text/javascript" src="./models/note-controller.js"></script>
    <script type="text/javascript" src="./spec/note-controller-tests.js"></script>
    <script type="text/javascript">

    list = new List();
    list.addItem("This is a really long message.  Remember to not use any node frameworks....");
    list.addItem("This is another long message and aother reminder that Sinatra is better than Express!!!");
    list.addItem("Buy some milk and stuff for dinner blah blah blah blah blah");

    var noteController = new NoteController(list);
    noteController.html();

    makeUrlChangeShowNoteForCurrentPage();

    function makeUrlChangeShowNoteForCurrentPage() {
      window.addEventListener("hashchange", showNoteForCurrentPage);
    };

    function showNoteForCurrentPage() {
      showNote(getNoteFromUrl(window.location));
    };

    function getNoteFromUrl(location) {
      var id = Number(location.hash.split("/")[1]);
      return list.getItems()[id].getText();
    };

    function showNote(note) {
      document
        .getElementById("app")
        .innerHTML = note;
    };
    </script>
  </body>
</html>
